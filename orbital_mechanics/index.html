<canvas id="demoCanvas" width="800" height="800" style="background-color:#000;"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/EaselJS/0.8.0/easeljs.min.js"></script>
<script src="objects.js"></script>
<script src="calculation.js"></script>

<script>
var stage = new createjs.Stage("demoCanvas");

var centerX = document.getElementById('demoCanvas').width / 2;
var centerY = document.getElementById('demoCanvas').height / 2;

function drawPlanet(x, y, name, color, scale) {
	var circle = new createjs.Shape();
	circle.graphics.beginFill(color).drawCircle(0, 0, 5);
	circle.x = centerX + (x * scale);
	circle.y = centerY - (y * scale);
	stage.addChildAt(circle, 0);
	
	if (name.length > 0) {
		var text = new createjs.Text(name, "20px Arial", color);
		text.x = centerX + (x * scale) + 10;
		text.y = centerY - (y * scale) - 10;
		text.textBaseline = "alphabetic";
		stage.addChild(text);
	}
}


var scale = 1/1500000000;
scale /= 10;

stage.clear();

drawPlanet(0, 0, "Sun", "White", scale);

var colorCurrent = "Red";
var colorPredicted = "Gray";

var plots = Math.pow(2,6);

objects.forEach(function(object, index) {
	
	var line = new createjs.Shape();
	line.graphics.beginStroke(colorPredicted);
		
	var last = null;
	
	for(var d = 0; d <= plots; d++) {
		var date = new Date();
		date.setDate(date.getDate() + d * (object.period / plots));
		
		var values = calculate(object, date);
		var name = d == 0 ? object.name : '';
		var color = d == 0 ? colorCurrent: colorPredicted;
		
		if (d == 0) {
			drawPlanet(values.cartesian.x, values.cartesian.y, name, color, scale);
		}
		
		if (last != null) {
			var deltaX = values.cartesian.x - last.cartesian.x;
			var deltaY = values.cartesian.y - last.cartesian.y;
			var delta = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));
			console.log(object.name, delta / 142110612.24489793);
			
		}
		
		if (d == 0) {
			line.graphics.moveTo(centerX + (values.cartesian.x * scale), centerY - (values.cartesian.y * scale));
		} else {
			line.graphics.lineTo(centerX + (values.cartesian.x * scale), centerY - (values.cartesian.y * scale));
		}
		
		last = values;
	}
	
	stage.addChildAt(line, 0);
});
stage.update();
</script>
